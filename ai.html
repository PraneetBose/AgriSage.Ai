<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriSathi - AgriSage.ai</title>

    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard-layout.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="dark-mode">

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="user-profile">
            <div class="avatar-container">
                <div class="avatar"><img src="" alt="User" id="user-avatar-img"></div>
                <div class="edit-avatar-btn" onclick="editAvatar()"><i class="fas fa-camera"></i></div>
            </div>
            <h3 class="user-name" id="display-name">Loading...</h3>
            <div class="user-role-container" onclick="editRole()">
                <p class="user-role" id="display-role">Estate Manager</p>
            </div>
            <span class="badge-premium">PREMIUM</span>
        </div>

        <ul class="nav-links">
            <li class="nav-item" onclick="window.location.href='dashboard.html'">
                <i class="fas fa-th-large"></i> <span>Dashboard</span>
            </li>
            <li class="nav-item active" onclick="window.location.href='ai.html'">
                <i class="fas fa-robot"></i> <span
                    style="background: linear-gradient(90deg, #FF8E53, #FF6B6B); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold;">AgriSathi
                    AI</span>
            </li>
            <li class="nav-item" onclick="window.location.href='agri-connect.html'"><i class="fas fa-users"></i>
                <span class="text-gradient-purple">AgriConnect</span>
            </li>
            <li class="nav-item" onclick="window.location.href='revenue.html'">
                <i class="fas fa-chart-line"></i> <span>Revenue Analysis</span>
            </li>
            <li class="nav-item" onclick="window.location.href='inventory.html'">
                <i class="fas fa-boxes"></i> <span>Inventory</span>
            </li>
            <li class="nav-item" onclick="window.location.href='crop-data.html'">
                <i class="fas fa-database"></i> <span>Crop Data</span>
            </li>
            <li class="nav-item" onclick="window.location.href='resellers.html'">
                <i class="fas fa-handshake"></i> <span>Resellers</span>
            </li>
            <li class="nav-item" onclick="window.location.href='help.html'">
                <i class="fas fa-headset"></i> <span>Help & Support</span>
            </li>
            <li class="nav-item" onclick="window.location.href='profile.html'"><i class="fas fa-user-circle"></i>
                <span>Profile</span>
            </li>
        </ul>

        <div class="logout-link" id="logout-btn"
            style="padding: 1rem; cursor: pointer; color: #888; display: flex; align-items: center; margin-top: auto;">
            <i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i>
            <span class="signout-glow">Sign Out</span>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="top-bar">
            <div style="font-weight: 800; color: var(--text-color); font-size: 1.2rem;">AgriSage.ai</div>

            <div style="display: flex; gap: 1rem; align-items: center;">
                <!-- Language Selector -->
                <select id="language-select"
                    style="background: rgba(0,0,0,0.4); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; outline: none;">
                    <option value="English">English ğŸ‡ºğŸ‡¸</option>
                    <option value="Hindi">Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€) ğŸ‡®ğŸ‡³</option>
                    <option value="Bengali">Bengali (à¦¬à¦¾à¦‚à¦²à¦¾) ğŸ‡®ğŸ‡³</option>
                    <option value="Odia">Odia (à¬“à¬¡à¬¼à¬¿à¬†) ğŸ‡®ğŸ‡³</option>
                    <option value="Marathi">Marathi (à¤®à¤°à¤¾à¤ à¥€) ğŸ‡®ğŸ‡³</option>
                    <option value="Gujarati">Gujarati (àª—à«àªœàª°àª¾àª¤à«€) ğŸ‡®ğŸ‡³</option>
                </select>

                <div id="stop-speech-btn" class="action-btn-pill"
                    style="display: none; background: rgba(255, 68, 68, 0.2); border: 1px solid #ff4444; color: #ff4444; cursor: pointer;"
                    onclick="stopSpeaking()">
                    <i class="fas fa-stop-circle"></i> Stop Speaking
                </div>

                <div class="live-badge" style="color: var(--accent-color);">LIVE DATA <div class="live-dot"></div>
                </div>
            </div>
        </div>

        <!-- AI CONTENT -->
        <div class="dashboard-header">
            <h1>AgriSathi AI Assistant</h1>
            <p>Ask anything about your farm, crops, or market trends.</p>
        </div>

        <div class="ai-chat-container card-3d">
            <div class="chat-messages" id="chat-messages">
                <div class="chat-msg ai">hi I am AgriSathi, ur personal ai assistant powered by Gemini.
                    I see you are
                    growing <strong id="ai-context-crop">crops</strong> in <strong id="ai-context-loc">your
                        area</strong>. How can I help you improve your yield today?
                </div>
            </div>
            <div class="chat-input-area" style="display: flex; align-items: center; gap: 10px;">

                <input type="text" class="chat-input" id="chat-input"
                    placeholder="Type your question here (e.g., 'How to treat yellow leaves?')..."
                    style="flex-grow: 1;">

                <!-- Hidden File Input -->
                <input type="file" id="image-upload" accept="image/*" style="display: none;"
                    onchange="handleImageSelect()">

                <!-- Camera Button -->
                <button class="submit-btn btn-gold"
                    style="width: 60px; height: 60px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center; border: none; font-size: 1.2rem; margin-left: 10px;"
                    onclick="document.getElementById('image-upload').click()" title="Upload Image">
                    <i class="fas fa-camera"></i>
                </button>

                <!-- Voice Mic Button -->
                <button class="submit-btn btn-animated" id="mic-btn"
                    style="width: 60px; height: 60px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center; border: none; font-size: 1.2rem; margin-left: 10px; background: rgba(255,255,255,0.1); color: var(--text-color);"
                    onclick="toggleVoiceCommand()" title="Voice Command">
                    <i class="fas fa-microphone" id="mic-icon"></i>
                </button>

                <button class="submit-btn btn-animated"
                    style="width: 60px; height: 60px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center; border: none; font-size: 1.2rem; margin-left: 10px;"
                    onclick="sendAiMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
            <button class="action-btn-pill" onclick="quickAsk('Best fertilizer for wheat?')">Best fertilizer?</button>
            <button class="action-btn-pill" onclick="quickAsk('Pest control for my region')">Pest control</button>
            <button class="action-btn-pill" onclick="quickAsk('Market price trends')">Market prices</button>
            <button class="action-btn-pill" onclick="quickAsk('Weather forecast for tomorrow')">Weather
                forecast</button>
        </div>
    </main>



    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ai-knowledge.js"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>